(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,94179,e=>{"use strict";var a=e.i(43476),r=e.i(91918),t=e.i(25913),s=e.i(47163);let o=(0,t.cva)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function n({className:e,variant:t,asChild:n=!1,...i}){let d=n?r.Slot:"span";return(0,a.jsx)(d,{"data-slot":"badge",className:(0,s.cn)(o({variant:t}),e),...i})}e.s(["Badge",()=>n])},31278,e=>{"use strict";let a=(0,e.i(75254).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>a],31278)},88844,15788,e=>{"use strict";var a=e.i(75254);let r=(0,a.default)("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);e.s(["Package",()=>r],88844);let t=(0,a.default)("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);e.s(["Truck",()=>t],15788)},78928,e=>{"use strict";var a=e.i(43476),r=e.i(71645);let t="https://gc8sncxhie.execute-api.us-east-1.amazonaws.com/dev",s="https://93icxxrllb.execute-api.us-east-1.amazonaws.com/dev",o=(e="CHINAWOK_LIMA_CENTRO")=>({"Content-Type":"application/json","x-tenant-id":e}),n=async e=>(await fetch(`${s}/status/dashboard`,{headers:o(e)})).json(),i=async(e,a,r,s)=>(await fetch(`${t}/orders/${e}/assign-cook`,{method:"POST",headers:o(s),body:JSON.stringify({staff_id:a,staff_name:r})})).json(),d=async(e,a,r,s)=>(await fetch(`${t}/orders/${e}/mark-packed`,{method:"POST",headers:o(s),body:JSON.stringify({staff_id:a,staff_name:r})})).json(),l=async(e,a,r,s)=>(await fetch(`${t}/orders/${e}/assign-delivery`,{method:"POST",headers:o(s),body:JSON.stringify({staff_id:a,staff_name:r})})).json(),c=async(e,a,r,s)=>(await fetch(`${t}/orders/${e}/mark-delivered`,{method:"POST",headers:o(s),body:JSON.stringify({staff_id:a,staff_name:r})})).json();var g=e.i(75254);let h=(0,g.default)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);var m=e.i(88844),u=e.i(15788);let x=(0,g.default)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);function b({totalOrders:e,pendingOrders:r,inDelivery:t,completed:s}){let o=[{label:"Total de Pedidos",value:e,icon:h,color:"bg-blue-50 text-blue-700",borderColor:"border-blue-200"},{label:"Pendientes",value:r,icon:m.Package,color:"bg-yellow-50 text-yellow-700",borderColor:"border-yellow-200"},{label:"En Camino",value:t,icon:u.Truck,color:"bg-orange-50 text-orange-700",borderColor:"border-orange-200"},{label:"Entregados",value:s,icon:x,color:"bg-green-50 text-green-700",borderColor:"border-green-200"}];return(0,a.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:o.map((e,r)=>{let t=e.icon;return(0,a.jsx)("div",{className:`p-6 rounded-xl border-2 ${e.borderColor} ${e.color}`,children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium opacity-75",children:e.label}),(0,a.jsx)("p",{className:"text-3xl font-bold mt-2",children:e.value})]}),(0,a.jsx)(t,{className:"h-8 w-8 opacity-50"})]})},r)})})}var p=e.i(47163);function y({className:e,...r}){return(0,a.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,a.jsx)("table",{"data-slot":"table",className:(0,p.cn)("w-full caption-bottom text-sm",e),...r})})}function f({className:e,...r}){return(0,a.jsx)("thead",{"data-slot":"table-header",className:(0,p.cn)("[&_tr]:border-b",e),...r})}function v({className:e,...r}){return(0,a.jsx)("tbody",{"data-slot":"table-body",className:(0,p.cn)("[&_tr:last-child]:border-0",e),...r})}function j({className:e,...r}){return(0,a.jsx)("tr",{"data-slot":"table-row",className:(0,p.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...r})}function k({className:e,...r}){return(0,a.jsx)("th",{"data-slot":"table-head",className:(0,p.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...r})}function w({className:e,...r}){return(0,a.jsx)("td",{"data-slot":"table-cell",className:(0,p.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...r})}var N=e.i(67881),C=e.i(94179);let E=(0,g.default)("ChefHat",[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]]),O=(0,g.default)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);function P({orders:e,onAssignCook:r,onMarkPacked:t,onAssignDelivery:s,onMarkDelivered:o}){let n=async(e,a)=>{try{"assignCook"===a&&await r(e),"markPacked"===a&&await t(e),"assignDelivery"===a&&await s(e),"markDelivered"===a&&await o(e)}catch(e){console.error("Error performing action:",e)}};return(0,a.jsx)("div",{className:"rounded-lg border border-gray-200 overflow-hidden bg-white",children:(0,a.jsxs)(y,{children:[(0,a.jsx)(f,{children:(0,a.jsxs)(j,{className:"bg-gray-50",children:[(0,a.jsx)(k,{children:"Pedido ID"}),(0,a.jsx)(k,{children:"Cliente"}),(0,a.jsx)(k,{children:"Estado"}),(0,a.jsx)(k,{children:"Total"}),(0,a.jsx)(k,{children:"Fecha"}),(0,a.jsx)(k,{className:"text-right",children:"Acciones"})]})}),(0,a.jsx)(v,{children:e.map(e=>{var r;let t=(r=e.status,({"Iniciando pedido":{label:"Asignar Cocinero",icon:E,action:"assignCook"},Cocinando:{label:"Marcar Empacado",icon:m.Package,action:"markPacked"},"Esperando empaque":{label:"Marcar Empacado",icon:m.Package,action:"markPacked"},Empacando:{label:"Asignar Repartidor",icon:u.Truck,action:"assignDelivery"},"En camino":{label:"Marcar Entregado",icon:O,action:"markDelivered"}})[r]);return(0,a.jsxs)(j,{className:"hover:bg-gray-50",children:[(0,a.jsxs)(w,{className:"font-bold text-cw-red",children:["#",e.id]}),(0,a.jsx)(w,{children:(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"font-medium",children:e.customerId}),e.phone&&(0,a.jsx)("span",{className:"text-xs text-gray-500",children:e.phone})]})}),(0,a.jsx)(w,{children:(0,a.jsx)(C.Badge,{className:{"Iniciando pedido":"bg-yellow-100 text-yellow-800","Cocinero asignado":"bg-blue-100 text-blue-800",Cocinando:"bg-blue-100 text-blue-800",Empacando:"bg-purple-100 text-purple-800","En camino":"bg-orange-100 text-orange-800",Entregado:"bg-green-100 text-green-800"}[e.status]||"bg-gray-100 text-gray-800",children:e.status})}),(0,a.jsxs)(w,{className:"font-semibold text-cw-green",children:["S/",e.total.toFixed(2)]}),(0,a.jsx)(w,{className:"text-sm text-gray-600",children:new Date(e.createdAt).toLocaleDateString()}),(0,a.jsxs)(w,{className:"text-right",children:[t&&(0,a.jsxs)(N.Button,{size:"sm",onClick:()=>n(e.id,t.action),className:"bg-cw-green hover:bg-green-700 text-white text-xs h-8",children:[(0,a.jsx)(t.icon,{className:"h-3 w-3 mr-1"}),t.label]}),!t&&(0,a.jsx)(C.Badge,{className:"bg-green-100 text-green-800",children:"Completado"})]})]},e.id)})})]})})}var A=e.i(31278);let T="COOK_01",D="Juan Cocinero",M="PACKER_01",S="Ana Empacadora",_="DELIVERY_01",$="Luis Repartidor";function I(){let[e,t]=(0,r.useState)({totalOrders:0,pendingOrders:0,inDelivery:0,completed:0,orders:[]}),[s,o]=(0,r.useState)(!0),[g,h]=(0,r.useState)(null),m=async()=>{try{o(!0);let e=await n(),a=["Iniciando pedido","Cocinero asignado","Cocinando","Esperando empaque","Empacando"],r=["En camino"],s=["Entregado"],i={totalOrders:e.orders?.length||0,pendingOrders:e.orders?.filter(e=>a.includes(e.status)).length||0,inDelivery:e.orders?.filter(e=>r.includes(e.status)).length||0,completed:e.orders?.filter(e=>s.includes(e.status)).length||0,orders:e.orders||[]};t(i),h(null)}catch(e){console.error("Error fetching dashboard data:",e),h("Error al cargar el dashboard")}finally{o(!1)}};(0,r.useEffect)(()=>{m();let e=setInterval(m,3e4);return()=>clearInterval(e)},[]);let u=async e=>{try{await i(e,T,D),t(a=>({...a,orders:a.orders.map(a=>a.id===e?{...a,status:"Cocinero asignado"}:a)}))}catch(e){console.error("Error assigning cook:",e)}},x=async e=>{try{await d(e,M,S),t(a=>({...a,orders:a.orders.map(a=>a.id===e?{...a,status:"Empacando"}:a)}))}catch(e){console.error("Error marking packed:",e)}},p=async e=>{try{await l(e,_,$),t(a=>({...a,orders:a.orders.map(a=>a.id===e?{...a,status:"En camino"}:a)}))}catch(e){console.error("Error assigning delivery:",e)}},y=async e=>{try{await c(e,_,$),t(a=>({...a,orders:a.orders.map(a=>a.id===e?{...a,status:"Entregado"}:a)}))}catch(e){console.error("Error marking delivered:",e)}};return(0,a.jsxs)("main",{className:"container mx-auto px-4 py-8",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard de Órdenes"}),(0,a.jsx)("p",{className:"text-gray-600 mt-2",children:"Gestiona todos los pedidos y su cumplimiento"})]}),g&&(0,a.jsx)("div",{className:"p-4 rounded-lg bg-red-50 border border-red-200 text-red-700 text-sm mb-6",children:g}),s?(0,a.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,a.jsx)(A.Loader2,{className:"h-8 w-8 animate-spin text-cw-green"})}):(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsx)(b,{totalOrders:e.totalOrders,pendingOrders:e.pendingOrders,inDelivery:e.inDelivery,completed:e.completed}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Órdenes Activas"}),(0,a.jsx)(P,{orders:e.orders,onAssignCook:u,onMarkPacked:x,onAssignDelivery:p,onMarkDelivered:y})]})]})]})}e.s(["default",()=>I],78928)}]);