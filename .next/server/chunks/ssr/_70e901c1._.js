module.exports=[54161,a=>{"use strict";var b=a.i(87924),c=a.i(11011),d=a.i(187),e=a.i(97895);let f=(0,d.cva)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function g({className:a,variant:d,asChild:g=!1,...h}){let i=g?c.Slot:"span";return(0,b.jsx)(i,{"data-slot":"badge",className:(0,e.cn)(f({variant:d}),a),...h})}a.s(["Badge",()=>g])},96221,a=>{"use strict";let b=(0,a.i(70106).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["Loader2",()=>b],96221)},83497,10227,a=>{"use strict";var b=a.i(70106);let c=(0,b.default)("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);a.s(["Package",()=>c],83497);let d=(0,b.default)("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);a.s(["Truck",()=>d],10227)},20731,a=>{"use strict";var b=a.i(87924),c=a.i(72131);let d="https://gc8sncxhie.execute-api.us-east-1.amazonaws.com/dev",e="https://93icxxrllb.execute-api.us-east-1.amazonaws.com/dev",f=(a="CHINAWOK_LIMA_CENTRO")=>({"Content-Type":"application/json","x-tenant-id":a}),g=async a=>(await fetch(`${e}/status/dashboard`,{headers:f(a)})).json(),h=async(a,b,c,e)=>(await fetch(`${d}/orders/${a}/assign-cook`,{method:"POST",headers:f(e),body:JSON.stringify({staff_id:b,staff_name:c})})).json(),i=async(a,b,c,e)=>(await fetch(`${d}/orders/${a}/mark-packed`,{method:"POST",headers:f(e),body:JSON.stringify({staff_id:b,staff_name:c})})).json(),j=async(a,b,c,e)=>(await fetch(`${d}/orders/${a}/assign-delivery`,{method:"POST",headers:f(e),body:JSON.stringify({staff_id:b,staff_name:c})})).json(),k=async(a,b,c,e)=>(await fetch(`${d}/orders/${a}/mark-delivered`,{method:"POST",headers:f(e),body:JSON.stringify({staff_id:b,staff_name:c})})).json();var l=a.i(70106);let m=(0,l.default)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);var n=a.i(83497),o=a.i(10227);let p=(0,l.default)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);function q({totalOrders:a,pendingOrders:c,inDelivery:d,completed:e}){let f=[{label:"Total de Pedidos",value:a,icon:m,color:"bg-blue-50 text-blue-700",borderColor:"border-blue-200"},{label:"Pendientes",value:c,icon:n.Package,color:"bg-yellow-50 text-yellow-700",borderColor:"border-yellow-200"},{label:"En Camino",value:d,icon:o.Truck,color:"bg-orange-50 text-orange-700",borderColor:"border-orange-200"},{label:"Entregados",value:e,icon:p,color:"bg-green-50 text-green-700",borderColor:"border-green-200"}];return(0,b.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:f.map((a,c)=>{let d=a.icon;return(0,b.jsx)("div",{className:`p-6 rounded-xl border-2 ${a.borderColor} ${a.color}`,children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium opacity-75",children:a.label}),(0,b.jsx)("p",{className:"text-3xl font-bold mt-2",children:a.value})]}),(0,b.jsx)(d,{className:"h-8 w-8 opacity-50"})]})},c)})})}var r=a.i(97895);function s({className:a,...c}){return(0,b.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,b.jsx)("table",{"data-slot":"table",className:(0,r.cn)("w-full caption-bottom text-sm",a),...c})})}function t({className:a,...c}){return(0,b.jsx)("thead",{"data-slot":"table-header",className:(0,r.cn)("[&_tr]:border-b",a),...c})}function u({className:a,...c}){return(0,b.jsx)("tbody",{"data-slot":"table-body",className:(0,r.cn)("[&_tr:last-child]:border-0",a),...c})}function v({className:a,...c}){return(0,b.jsx)("tr",{"data-slot":"table-row",className:(0,r.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",a),...c})}function w({className:a,...c}){return(0,b.jsx)("th",{"data-slot":"table-head",className:(0,r.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...c})}function x({className:a,...c}){return(0,b.jsx)("td",{"data-slot":"table-cell",className:(0,r.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...c})}var y=a.i(40695),z=a.i(54161);let A=(0,l.default)("ChefHat",[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]]),B=(0,l.default)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);function C({orders:a,onAssignCook:c,onMarkPacked:d,onAssignDelivery:e,onMarkDelivered:f}){let g=async(a,b)=>{try{"assignCook"===b&&await c(a),"markPacked"===b&&await d(a),"assignDelivery"===b&&await e(a),"markDelivered"===b&&await f(a)}catch(a){console.error("Error performing action:",a)}};return(0,b.jsx)("div",{className:"rounded-lg border border-gray-200 overflow-hidden bg-white",children:(0,b.jsxs)(s,{children:[(0,b.jsx)(t,{children:(0,b.jsxs)(v,{className:"bg-gray-50",children:[(0,b.jsx)(w,{children:"Pedido ID"}),(0,b.jsx)(w,{children:"Cliente"}),(0,b.jsx)(w,{children:"Estado"}),(0,b.jsx)(w,{children:"Total"}),(0,b.jsx)(w,{children:"Fecha"}),(0,b.jsx)(w,{className:"text-right",children:"Acciones"})]})}),(0,b.jsx)(u,{children:a.map(a=>{var c;let d=(c=a.status,({"Iniciando pedido":{label:"Asignar Cocinero",icon:A,action:"assignCook"},Cocinando:{label:"Marcar Empacado",icon:n.Package,action:"markPacked"},"Esperando empaque":{label:"Marcar Empacado",icon:n.Package,action:"markPacked"},Empacando:{label:"Asignar Repartidor",icon:o.Truck,action:"assignDelivery"},"En camino":{label:"Marcar Entregado",icon:B,action:"markDelivered"}})[c]);return(0,b.jsxs)(v,{className:"hover:bg-gray-50",children:[(0,b.jsxs)(x,{className:"font-bold text-cw-red",children:["#",a.id]}),(0,b.jsx)(x,{children:(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("span",{className:"font-medium",children:a.customerId}),a.phone&&(0,b.jsx)("span",{className:"text-xs text-gray-500",children:a.phone})]})}),(0,b.jsx)(x,{children:(0,b.jsx)(z.Badge,{className:{"Iniciando pedido":"bg-yellow-100 text-yellow-800","Cocinero asignado":"bg-blue-100 text-blue-800",Cocinando:"bg-blue-100 text-blue-800",Empacando:"bg-purple-100 text-purple-800","En camino":"bg-orange-100 text-orange-800",Entregado:"bg-green-100 text-green-800"}[a.status]||"bg-gray-100 text-gray-800",children:a.status})}),(0,b.jsxs)(x,{className:"font-semibold text-cw-green",children:["S/",a.total.toFixed(2)]}),(0,b.jsx)(x,{className:"text-sm text-gray-600",children:new Date(a.createdAt).toLocaleDateString()}),(0,b.jsxs)(x,{className:"text-right",children:[d&&(0,b.jsxs)(y.Button,{size:"sm",onClick:()=>g(a.id,d.action),className:"bg-cw-green hover:bg-green-700 text-white text-xs h-8",children:[(0,b.jsx)(d.icon,{className:"h-3 w-3 mr-1"}),d.label]}),!d&&(0,b.jsx)(z.Badge,{className:"bg-green-100 text-green-800",children:"Completado"})]})]},a.id)})})]})})}var D=a.i(96221);let E="COOK_01",F="Juan Cocinero",G="PACKER_01",H="Ana Empacadora",I="DELIVERY_01",J="Luis Repartidor";function K(){let[a,d]=(0,c.useState)({totalOrders:0,pendingOrders:0,inDelivery:0,completed:0,orders:[]}),[e,f]=(0,c.useState)(!0),[l,m]=(0,c.useState)(null),n=async()=>{try{f(!0);let a=await g(),b=["Iniciando pedido","Cocinero asignado","Cocinando","Esperando empaque","Empacando"],c=["En camino"],e=["Entregado"],h={totalOrders:a.orders?.length||0,pendingOrders:a.orders?.filter(a=>b.includes(a.status)).length||0,inDelivery:a.orders?.filter(a=>c.includes(a.status)).length||0,completed:a.orders?.filter(a=>e.includes(a.status)).length||0,orders:a.orders||[]};d(h),m(null)}catch(a){console.error("Error fetching dashboard data:",a),m("Error al cargar el dashboard")}finally{f(!1)}};(0,c.useEffect)(()=>{n();let a=setInterval(n,3e4);return()=>clearInterval(a)},[]);let o=async a=>{try{await h(a,E,F),d(b=>({...b,orders:b.orders.map(b=>b.id===a?{...b,status:"Cocinero asignado"}:b)}))}catch(a){console.error("Error assigning cook:",a)}},p=async a=>{try{await i(a,G,H),d(b=>({...b,orders:b.orders.map(b=>b.id===a?{...b,status:"Empacando"}:b)}))}catch(a){console.error("Error marking packed:",a)}},r=async a=>{try{await j(a,I,J),d(b=>({...b,orders:b.orders.map(b=>b.id===a?{...b,status:"En camino"}:b)}))}catch(a){console.error("Error assigning delivery:",a)}},s=async a=>{try{await k(a,I,J),d(b=>({...b,orders:b.orders.map(b=>b.id===a?{...b,status:"Entregado"}:b)}))}catch(a){console.error("Error marking delivered:",a)}};return(0,b.jsxs)("main",{className:"container mx-auto px-4 py-8",children:[(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard de Órdenes"}),(0,b.jsx)("p",{className:"text-gray-600 mt-2",children:"Gestiona todos los pedidos y su cumplimiento"})]}),l&&(0,b.jsx)("div",{className:"p-4 rounded-lg bg-red-50 border border-red-200 text-red-700 text-sm mb-6",children:l}),e?(0,b.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,b.jsx)(D.Loader2,{className:"h-8 w-8 animate-spin text-cw-green"})}):(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsx)(q,{totalOrders:a.totalOrders,pendingOrders:a.pendingOrders,inDelivery:a.inDelivery,completed:a.completed}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Órdenes Activas"}),(0,b.jsx)(C,{orders:a.orders,onAssignCook:o,onMarkPacked:p,onAssignDelivery:r,onMarkDelivered:s})]})]})]})}a.s(["default",()=>K],20731)}];

//# sourceMappingURL=_70e901c1._.js.map