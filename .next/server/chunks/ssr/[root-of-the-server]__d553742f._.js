module.exports=[74012,3337,89270,a=>{"use strict";var b,c;let d="Logging";a.s(["AWS_CLOUDWATCH_CATEGORY",()=>d,"NO_HUBCALLBACK_PROVIDED_EXCEPTION",()=>"NoHubcallbackProvidedException","USER_AGENT_HEADER",()=>"x-amz-user-agent"],3337),(c=b||(b={})).DEBUG="DEBUG",c.ERROR="ERROR",c.INFO="INFO",c.WARN="WARN",c.VERBOSE="VERBOSE",c.NONE="NONE";let e={VERBOSE:1,DEBUG:2,INFO:3,WARN:4,ERROR:5,NONE:6};class f{constructor(a,c=b.WARN){this.name=a,this.level=c,this._pluggables=[]}_padding(a){return a<10?"0"+a:""+a}_ts(){let a=new Date;return[this._padding(a.getMinutes()),this._padding(a.getSeconds())].join(":")+"."+a.getMilliseconds()}configure(a){return a&&(this._config=a),this._config}_log(a,...c){let d=this.level;f.LOG_LEVEL&&(d=f.LOG_LEVEL);let g=e[d];if(!(e[a]>=g))return;let h=console.log.bind(console);a===b.ERROR&&console.error&&(h=console.error.bind(console)),a===b.WARN&&console.warn&&(h=console.warn.bind(console)),f.BIND_ALL_LOG_LEVELS&&(a===b.INFO&&console.info&&(h=console.info.bind(console)),a===b.DEBUG&&console.debug&&(h=console.debug.bind(console)));let i=`[${a}] ${this._ts()} ${this.name}`,j="";if(1===c.length&&"string"==typeof c[0])h(j=`${i} - ${c[0]}`);else if(1===c.length)j=`${i} ${c[0]}`,h(i,c[0]);else if("string"==typeof c[0]){let a=c.slice(1);1===a.length&&(a=a[0]),j=`${i} - ${c[0]} ${a}`,h(`${i} - ${c[0]}`,a)}else j=`${i} ${c}`,h(i,c);for(let a of this._pluggables){let b={message:j,timestamp:Date.now()};a.pushLogs([b])}}log(...a){this._log(b.INFO,...a)}info(...a){this._log(b.INFO,...a)}warn(...a){this._log(b.WARN,...a)}error(...a){this._log(b.ERROR,...a)}debug(...a){this._log(b.DEBUG,...a)}verbose(...a){this._log(b.VERBOSE,...a)}addPluggable(a){a&&a.getCategoryName()===d&&(this._pluggables.push(a),a.configure(this._config))}listPluggables(){return this._pluggables}}f.LOG_LEVEL=null,f.BIND_ALL_LOG_LEVELS=!1,a.s(["ConsoleLogger",()=>f],74012);class g extends Error{constructor({message:a,name:b,recoverySuggestion:c,underlyingError:d,metadata:e}){if(super(a),this.name=b,this.underlyingError=d,this.recoverySuggestion=c,e){const{extendedRequestId:a,httpStatusCode:b,requestId:c}=e;this.metadata={extendedRequestId:a,httpStatusCode:b,requestId:c}}this.constructor=g,Object.setPrototypeOf(this,g.prototype)}}a.s(["AmplifyError",()=>g],89270)},874,(a,b,c)=>{b.exports=a.x("buffer",()=>require("buffer"))},23285,5057,69012,45255,9636,23048,21352,a=>{"use strict";var b=a.i(74012),c=a.i(3337),d=a.i(89270);let e="undefined"!=typeof Symbol?Symbol("amplify_default"):"@@amplify_default",f=new b.ConsoleLogger("Hub");class g{constructor(a){this.listeners=new Map,this.protectedChannels=["core","auth","api","analytics","interactions","pubsub","storage","ui","xr"],this.name=a}_remove(a,b){let c=this.listeners.get(a);c?this.listeners.set(a,[...c.filter(({callback:a})=>a!==b)]):f.warn(`No listeners for ${a}`)}dispatch(a,b,c,d){"string"==typeof a&&this.protectedChannels.indexOf(a)>-1&&d!==e&&f.warn(`WARNING: ${a} is protected and dispatching on it can have unintended consequences`);let g={channel:a,payload:{...b},source:c,patternInfo:[]};try{this._toListeners(g)}catch(a){f.error(a)}}listen(a,b,e="noname"){if("function"!=typeof b)throw new d.AmplifyError({name:c.NO_HUBCALLBACK_PROVIDED_EXCEPTION,message:"No callback supplied to Hub"});let f=this.listeners.get(a);return f||(f=[],this.listeners.set(a,f)),f.push({name:e,callback:b}),()=>{this._remove(a,b)}}_toListeners(a){let{channel:b,payload:c}=a,d=this.listeners.get(b);d&&d.forEach(d=>{f.debug(`Dispatching to ${b} with `,c);try{d.callback(a)}catch(a){f.error(a)}})}}let h=new g("__default__"),i=new g("internal-hub");a.s(["AMPLIFY_SYMBOL",()=>e,"Hub",()=>h,"HubInternal",()=>i],5057);let j=a=>{for(let b of Reflect.ownKeys(a)){let c=a[b];(c&&"object"==typeof c||"function"==typeof c)&&j(c)}return Object.freeze(a)},k=Symbol("oauth-listener");a.s(["ADD_OAUTH_LISTENER",()=>k],69012);let l=new b.ConsoleLogger("parseAWSExports"),m={API_KEY:"apiKey",AWS_IAM:"iam",AMAZON_COGNITO_USER_POOLS:"userPool",OPENID_CONNECT:"oidc",NONE:"none",AWS_LAMBDA:"lambda",LAMBDA:"lambda"},n=a=>a?.split(",")??[],o={AMAZON_COGNITO_USER_POOLS:"userPool",API_KEY:"apiKey",AWS_IAM:"iam",AWS_LAMBDA:"lambda",OPENID_CONNECT:"oidc"},p={GOOGLE:"Google",LOGIN_WITH_AMAZON:"Amazon",FACEBOOK:"Facebook",SIGN_IN_WITH_APPLE:"Apple"},q=a=>{if(Object.keys(a).some(a=>a.startsWith("aws_")))return((a={})=>{if(!Object.prototype.hasOwnProperty.call(a,"aws_project_region"))throw new d.AmplifyError({name:"InvalidParameterException",message:"Invalid config parameter.",recoverySuggestion:"Ensure passing the config object imported from  `amplifyconfiguration.json`."});let{aws_appsync_apiKey:b,aws_appsync_authenticationType:c,aws_appsync_graphqlEndpoint:e,aws_appsync_region:f,aws_bots_config:g,aws_cognito_identity_pool_id:h,aws_cognito_sign_up_verification_method:i,aws_cognito_mfa_configuration:j,aws_cognito_mfa_types:k,aws_cognito_password_protection_settings:o,aws_cognito_verification_mechanisms:p,aws_cognito_signup_attributes:q,aws_cognito_social_providers:r,aws_cognito_username_attributes:s,aws_mandatory_sign_in:t,aws_mobile_analytics_app_id:u,aws_mobile_analytics_app_region:v,aws_user_files_s3_bucket:w,aws_user_files_s3_bucket_region:x,aws_user_files_s3_dangerously_connect_to_http_endpoint_for_testing:y,aws_user_pools_id:z,aws_user_pools_web_client_id:A,geo:B,oauth:C,predictions:D,aws_cloud_logic_custom:E,Notifications:F,modelIntrospection:G}=a,H={};u&&(H.Analytics={Pinpoint:{appId:u,region:v}});let{InAppMessaging:I,Push:J}=F??{};if(I?.AWSPinpoint||J?.AWSPinpoint){if(I?.AWSPinpoint){let{appId:a,region:b}=I.AWSPinpoint;H.Notifications={InAppMessaging:{Pinpoint:{appId:a,region:b}}}}if(J?.AWSPinpoint){let{appId:a,region:b}=J.AWSPinpoint;H.Notifications={...H.Notifications,PushNotification:{Pinpoint:{appId:a,region:b}}}}}if(Array.isArray(g)&&(H.Interactions={LexV1:Object.fromEntries(g.map(a=>[a.name,a]))}),e){let a=m[c];a||l.debug(`Invalid authentication type ${c}. Falling back to IAM.`),H.API={GraphQL:{endpoint:e,apiKey:b,region:f,defaultAuthMode:a??"iam"}},G&&(H.API.GraphQL.modelIntrospection=G)}let K=j?{status:j&&j.toLowerCase(),totpEnabled:k?.includes("TOTP")??!1,smsEnabled:k?.includes("SMS")??!1}:void 0,L=o?{minLength:o.passwordPolicyMinLength,requireLowercase:o.passwordPolicyCharacters?.includes("REQUIRES_LOWERCASE")??!1,requireUppercase:o.passwordPolicyCharacters?.includes("REQUIRES_UPPERCASE")??!1,requireNumbers:o.passwordPolicyCharacters?.includes("REQUIRES_NUMBERS")??!1,requireSpecialCharacters:o.passwordPolicyCharacters?.includes("REQUIRES_SYMBOLS")??!1}:void 0,M=Array.from(new Set([...p??[],...q??[]])).reduce((a,b)=>({...a,[b.toLowerCase()]:{required:!0}}),{}),N=s?.includes("EMAIL")??!1,O=s?.includes("PHONE_NUMBER")??!1;(h||z)&&(H.Auth={Cognito:{identityPoolId:h,allowGuestAccess:"enable"!==t,signUpVerificationMethod:i,userAttributes:M,userPoolClientId:A,userPoolId:z,mfa:K,passwordFormat:L,loginWith:{username:!(N||O),email:N,phone:O}}});let P=!!C&&Object.keys(C).length>0,Q=!!r&&r.length>0;if(H.Auth&&P&&(H.Auth.Cognito.loginWith={...H.Auth.Cognito.loginWith,oauth:{...(({domain:a,scope:b,redirectSignIn:c,redirectSignOut:d,responseType:e})=>({domain:a,scopes:b,redirectSignIn:n(c),redirectSignOut:n(d),responseType:e}))(C),...Q&&{providers:r.map(a=>{let b=a.toLowerCase();return b.charAt(0).toUpperCase()+b.slice(1)})}}}),w&&(H.Storage={S3:{bucket:w,region:x,dangerouslyConnectToHttpEndpointForTesting:y}}),B){let{amazon_location_service:a}=B;H.Geo={LocationService:{maps:a.maps,geofenceCollections:a.geofenceCollections,searchIndices:a.search_indices,region:a.region}}}if(E&&(H.API={...H.API,REST:E.reduce((a,b)=>{let{name:c,endpoint:d,region:e,service:f}=b;return{...a,[c]:{endpoint:d,...f?{service:f}:void 0,...e?{region:e}:void 0}}},{})}),D){let{VoiceId:a}=D?.convert?.speechGenerator?.defaults??{};H.Predictions=a?{...D,convert:{...D.convert,speechGenerator:{...D.convert.speechGenerator,defaults:{voiceId:a}}}}:D}return H})(a);if(!function(a){let{version:b}=a;return!!b&&b.startsWith("1")}(a))return a;let b={};if(a.storage&&(b.Storage=function(a){let b;if(!a)return;let{bucket_name:c,aws_region:d,buckets:e}=a;return{S3:{bucket:c,region:d,buckets:e&&(b={},e.forEach(({name:a,bucket_name:c,aws_region:d,paths:e})=>{if(a in b)throw Error(`Duplicate friendly name found: ${a}. Name must be unique.`);let f=e?Object.entries(e).reduce((a,[b,c])=>(void 0!==c&&(a[b]=c),a),{}):void 0;b[a]={bucketName:c,region:d,paths:f}}),b)}}}(a.storage)),a.auth&&(b.Auth=function(a){var b;if(!a)return;let{user_pool_id:c,user_pool_client_id:d,identity_pool_id:e,password_policy:f,mfa_configuration:g,mfa_methods:h,unauthenticated_identities_enabled:i,oauth:j,username_attributes:k,standard_required_attributes:l,groups:m}=a,n={Cognito:{userPoolId:c,userPoolClientId:d,groups:m}};return e&&(n.Cognito={...n.Cognito,identityPoolId:e}),f&&(n.Cognito.passwordFormat={requireLowercase:f.require_lowercase,requireNumbers:f.require_numbers,requireUppercase:f.require_uppercase,requireSpecialCharacters:f.require_symbols,minLength:f.min_length??6}),g&&(n.Cognito.mfa={status:"OPTIONAL"===(b=g)?"optional":"REQUIRED"===b?"on":"off",smsEnabled:h?.includes("SMS"),totpEnabled:h?.includes("TOTP")}),i&&(n.Cognito.allowGuestAccess=i),j&&(n.Cognito.loginWith={oauth:{domain:j.domain,redirectSignIn:j.redirect_sign_in_uri,redirectSignOut:j.redirect_sign_out_uri,responseType:"token"===j.response_type?"token":"code",scopes:j.scopes,providers:function(a=[]){return a.reduce((a,b)=>(void 0!==p[b]&&a.push(p[b]),a),[])}(j.identity_providers)}}),k&&(n.Cognito.loginWith={...n.Cognito.loginWith,email:k.includes("email"),phone:k.includes("phone_number"),username:k.includes("username")}),l&&(n.Cognito.userAttributes=l.reduce((a,b)=>({...a,[b]:{required:!0}}),{})),n}(a.auth)),a.analytics&&(b.Analytics=function(a){if(!a?.amazon_pinpoint)return;let{amazon_pinpoint:b}=a;return{Pinpoint:{appId:b.app_id,region:b.aws_region}}}(a.analytics)),a.geo&&(b.Geo=function(a){if(!a)return;let{aws_region:b,geofence_collections:c,maps:d,search_indices:e}=a;return{LocationService:{region:b,searchIndices:e,geofenceCollections:c,maps:d}}}(a.geo)),a.data&&(b.API=function(a){if(!a)return;let{aws_region:b,default_authorization_type:c,url:d,api_key:e,model_introspection:f}=a;return{GraphQL:{endpoint:d,defaultAuthMode:o[c],region:b,apiKey:e,modelIntrospection:f}}}(a.data)),a.custom){let c=function(a){if(!a?.events)return;let{url:b,aws_region:c,api_key:d,default_authorization_type:e}=a.events;return{Events:{endpoint:b,defaultAuthMode:o[e],region:c,apiKey:d}}}(a.custom);c&&"Events"in c&&(b.API={...b.API,...c})}return a.notifications&&(b.Notifications=function(a){if(!a)return;let{aws_region:b,channels:c,amazon_pinpoint_app_id:d}=a,e=c.includes("IN_APP_MESSAGING"),f=c.includes("APNS")||c.includes("FCM");if(!(e||f))return;let g={};return e&&(g.InAppMessaging={Pinpoint:{appId:d,region:b}}),f&&(g.PushNotification={Pinpoint:{appId:d,region:b}}),g}(a.notifications)),b};a.s(["parseAmplifyConfig",()=>q],45255);var r=("function"==typeof SuppressedError&&SuppressedError,new Uint32Array([0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0xfc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x6ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2])),s=[0x6a09e667,0xbb67ae85,0x3c6ef372,0xa54ff53a,0x510e527f,0x9b05688c,0x1f83d9ab,0x5be0cd19],t=function(){function a(){this.state=Int32Array.from(s),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return a.prototype.update=function(a){if(this.finished)throw Error("Attempted to update an already finished hash.");var b=0,c=a.byteLength;if(this.bytesHashed+=c,8*this.bytesHashed>0x1fffffffffffff)throw Error("Cannot hash more than 2^53 - 1 bits");for(;c>0;)this.buffer[this.bufferLength++]=a[b++],c--,64===this.bufferLength&&(this.hashBuffer(),this.bufferLength=0)},a.prototype.digest=function(){if(!this.finished){var a=8*this.bytesHashed,b=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),c=this.bufferLength;if(b.setUint8(this.bufferLength++,128),c%64>=56){for(var d=this.bufferLength;d<64;d++)b.setUint8(d,0);this.hashBuffer(),this.bufferLength=0}for(var d=this.bufferLength;d<56;d++)b.setUint8(d,0);b.setUint32(56,Math.floor(a/0x100000000),!0),b.setUint32(60,a),this.hashBuffer(),this.finished=!0}for(var e=new Uint8Array(32),d=0;d<8;d++)e[4*d]=this.state[d]>>>24&255,e[4*d+1]=this.state[d]>>>16&255,e[4*d+2]=this.state[d]>>>8&255,e[4*d+3]=this.state[d]>>>0&255;return e},a.prototype.hashBuffer=function(){for(var a=this.buffer,b=this.state,c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=0;k<64;k++){if(k<16)this.temp[k]=(255&a[4*k])<<24|(255&a[4*k+1])<<16|(255&a[4*k+2])<<8|255&a[4*k+3];else{var l=this.temp[k-2],m=(l>>>17|l<<15)^(l>>>19|l<<13)^l>>>10,n=((l=this.temp[k-15])>>>7|l<<25)^(l>>>18|l<<14)^l>>>3;this.temp[k]=(m+this.temp[k-7]|0)+(n+this.temp[k-16]|0)}var o=(((g>>>6|g<<26)^(g>>>11|g<<21)^(g>>>25|g<<7))+(g&h^~g&i)|0)+(j+(r[k]+this.temp[k]|0)|0)|0,p=((c>>>2|c<<30)^(c>>>13|c<<19)^(c>>>22|c<<10))+(c&d^c&e^d&e)|0;j=i,i=h,h=g,g=f+o|0,f=e,e=d,d=c,c=o+p|0}b[0]+=c,b[1]+=d,b[2]+=e,b[3]+=f,b[4]+=g,b[5]+=h,b[6]+=i,b[7]+=j},a}(),u=a.i(874),v="undefined"!=typeof Buffer&&Buffer.from?function(a){return Buffer.from(a,"utf8")}:a=>{let b=((a,b)=>{if("string"!=typeof a)throw TypeError(`The "input" argument must be of type string. Received type ${typeof a} (${a})`);return b?u.Buffer.from(a,b):u.Buffer.from(a)})(a,"utf8");return new Uint8Array(b.buffer,b.byteOffset,b.byteLength/Uint8Array.BYTES_PER_ELEMENT)};function w(a){return a instanceof Uint8Array?a:"string"==typeof a?v(a):ArrayBuffer.isView(a)?new Uint8Array(a.buffer,a.byteOffset,a.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(a)}var x=function(){function a(a){this.secret=a,this.hash=new t,this.reset()}return a.prototype.update=function(a){if(!("string"==typeof a?0===a.length:0===a.byteLength)&&!this.error)try{this.hash.update(w(a))}catch(a){this.error=a}},a.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},a.prototype.digest=function(){var a,b,c,d;return a=this,b=void 0,c=void 0,d=function(){return function(a,b){var c,d,e,f={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]},g=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return g.next=h(0),g.throw=h(1),g.return=h(2),"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function h(h){return function(i){var j=[h,i];if(c)throw TypeError("Generator is already executing.");for(;g&&(g=0,j[0]&&(f=0)),f;)try{if(c=1,d&&(e=2&j[0]?d.return:j[0]?d.throw||((e=d.return)&&e.call(d),0):d.next)&&!(e=e.call(d,j[1])).done)return e;switch(d=0,e&&(j=[2&j[0],e.value]),j[0]){case 0:case 1:e=j;break;case 4:return f.label++,{value:j[1],done:!1};case 5:f.label++,d=j[1],j=[0];continue;case 7:j=f.ops.pop(),f.trys.pop();continue;default:if(!(e=(e=f.trys).length>0&&e[e.length-1])&&(6===j[0]||2===j[0])){f=0;continue}if(3===j[0]&&(!e||j[1]>e[0]&&j[1]<e[3])){f.label=j[1];break}if(6===j[0]&&f.label<e[1]){f.label=e[1],e=j;break}if(e&&f.label<e[2]){f.label=e[2],f.ops.push(j);break}e[2]&&f.ops.pop(),f.trys.pop();continue}j=b.call(a,f)}catch(a){j=[6,a],d=0}finally{c=e=0}if(5&j[0])throw j[1];return{value:j[0]?j[1]:void 0,done:!0}}}}(this,function(a){return[2,this.digestSync()]})},new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})},a.prototype.reset=function(){if(this.hash=new t,this.secret){this.outer=new t;var a=function(a){var b=w(a);if(b.byteLength>64){var c=new t;c.update(b),b=c.digest()}var d=new Uint8Array(64);return d.set(b),d}(this.secret),b=new Uint8Array(64);b.set(a);for(var c=0;c<64;c++)a[c]^=54,b[c]^=92;this.hash.update(a),this.outer.update(b);for(var c=0;c<a.byteLength;c++)a[c]=0}},a}();a.s(["Sha256",()=>x],9636),a.s([],23048);let y={},z={};for(let a=0;a<256;a++){let b=a.toString(16).toLowerCase();1===b.length&&(b=`0${b}`),y[a]=b,z[b]=a}a.s([],21352);let A=new b.ConsoleLogger("Auth");class B{configure(a,b){this.authConfig=a,this.authOptions=b,a&&a.Cognito?.userPoolEndpoint&&A.warn(C("Amazon Cognito User Pool")),a&&a.Cognito?.identityPoolEndpoint&&A.warn(C("Amazon Cognito Identity Pool"))}async fetchAuthSession(a={}){let b,c,d=await this.getTokens(a);return d?(c=d.accessToken?.payload?.sub,b=await this.authOptions?.credentialsProvider?.getCredentialsAndIdentityId({authConfig:this.authConfig,tokens:d,authenticated:!0,forceRefresh:a.forceRefresh})):b=await this.authOptions?.credentialsProvider?.getCredentialsAndIdentityId({authConfig:this.authConfig,authenticated:!1,forceRefresh:a.forceRefresh}),{tokens:d,credentials:b?.credentials,identityId:b?.identityId,userSub:c}}async clearCredentials(){await this.authOptions?.credentialsProvider?.clearCredentialsAndIdentityId()}async getTokens(a){return await this.authOptions?.tokenProvider?.getTokens(a)??void 0}}let C=a=>`You are using a custom Amazon ${a} endpoint, ensure the endpoint is correct.`,D=new class{constructor(){this.oAuthListener=void 0,this.isConfigured=!1,this.resourcesConfig={},this.libraryOptions={},this.Auth=new B}configure(a,b){let c=q(a);this.resourcesConfig=c,b&&(this.libraryOptions=b),this.resourcesConfig=j(this.resourcesConfig),this.Auth.configure(this.resourcesConfig.Auth,this.libraryOptions.Auth),h.dispatch("core",{event:"configure",data:this.resourcesConfig},"Configure",e),this.notifyOAuthListener(),this.isConfigured=!0}getConfig(){return this.isConfigured||console.warn("Amplify has not been configured. Please call Amplify.configure() before using this service."),this.resourcesConfig}[k](a){this.resourcesConfig.Auth?.Cognito.loginWith?.oauth?a(this.resourcesConfig.Auth?.Cognito):this.oAuthListener=a}notifyOAuthListener(){this.resourcesConfig.Auth?.Cognito.loginWith?.oauth&&this.oAuthListener&&(this.oAuthListener(this.resourcesConfig.Auth?.Cognito),this.oAuthListener=void 0)}};a.s(["Amplify",()=>D],23285)},11883,48770,32628,a=>{"use strict";function b(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)a[d]=c[d]}return a}var c,d,e=function a(c,d){function e(a,e,f){if("undefined"!=typeof document){"number"==typeof(f=b({},d,f)).expires&&(f.expires=new Date(Date.now()+864e5*f.expires)),f.expires&&(f.expires=f.expires.toUTCString()),a=encodeURIComponent(a).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var g="";for(var h in f)f[h]&&(g+="; "+h,!0!==f[h]&&(g+="="+f[h].split(";")[0]));return document.cookie=a+"="+c.write(e,a)+g}}return Object.create({set:e,get:function(a){if("undefined"!=typeof document&&(!arguments.length||a)){for(var b=document.cookie?document.cookie.split("; "):[],d={},e=0;e<b.length;e++){var f=b[e].split("="),g=f.slice(1).join("=");try{var h=decodeURIComponent(f[0]);if(d[h]=c.read(g,h),a===h)break}catch(a){}}return a?d[a]:d}},remove:function(a,c){e(a,"",b({},c,{expires:-1}))},withAttributes:function(c){return a(this.converter,b({},this.attributes,c))},withConverter:function(c){return a(b({},this.converter,c),this.attributes)}},{attributes:{value:Object.freeze(d)},converter:{value:Object.freeze(c)}})}({read:function(a){return'"'===a[0]&&(a=a.slice(1,-1)),a.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(a){return encodeURIComponent(a).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});class f{constructor(a={}){const{path:b,domain:c,expires:d,sameSite:e,secure:f}=a;if(this.domain=c,this.path=b||"/",this.expires=Object.prototype.hasOwnProperty.call(a,"expires")?d:365,this.secure=!Object.prototype.hasOwnProperty.call(a,"secure")||f,Object.prototype.hasOwnProperty.call(a,"sameSite")){if(!e||!["strict","lax","none"].includes(e))throw Error('The sameSite value of cookieStorage must be "lax", "strict" or "none".');if("none"===e&&!this.secure)throw Error("sameSite = None requires the Secure attribute in latest browser versions.");this.sameSite=e}}async setItem(a,b){e.set(a,b,this.getData())}async getItem(a){return e.get(a)??null}async removeItem(a){e.remove(a,this.getData())}async clear(){let a=Object.keys(e.get()).map(a=>this.removeItem(a));await Promise.all(a)}getData(){return{path:this.path,expires:this.expires,domain:this.domain,secure:this.secure,...this.sameSite&&{sameSite:this.sameSite}}}}a.s(["CookieStorage",()=>f],11883),(d=c||(c={})).NoEndpointId="NoEndpointId",d.PlatformNotSupported="PlatformNotSupported",d.Unknown="Unknown",d.NetworkError="NetworkError",a.s(["AmplifyErrorCode",()=>c],48770);var g=a.i(89270);class h extends g.AmplifyError{constructor(){super({name:c.PlatformNotSupported,message:"Function not supported on current platform"})}}class i{constructor(a){this.storage=a}async setItem(a,b){if(!this.storage)throw new h;this.storage.setItem(a,b)}async getItem(a){if(!this.storage)throw new h;return this.storage.getItem(a)}async removeItem(a){if(!this.storage)throw new h;this.storage.removeItem(a)}async clear(){if(!this.storage)throw new h;this.storage.clear()}}var j=a.i(74012);class k{constructor(){this.storage=new Map}get length(){return this.storage.size}key(a){return a>this.length-1?null:Array.from(this.storage.keys())[a]}setItem(a,b){this.storage.set(a,b)}getItem(a){return this.storage.get(a)??null}removeItem(a){this.storage.delete(a)}clear(){this.storage.clear()}}let l=new j.ConsoleLogger("CoreStorageUtils"),m=()=>{try{throw Error("sessionStorage is not defined")}catch(a){return l.info("sessionStorage not found. InMemoryStorage is used as a fallback."),new k}};class n{constructor(a){this._storage=a}get storage(){if(!this._storage)throw new h;return this._storage}setItem(a,b){this.storage.setItem(a,b)}getItem(a){return this.storage.getItem(a)}removeItem(a){this.storage.removeItem(a)}clear(){this.storage.clear()}}let o=new class extends i{constructor(){super(new k)}};new class extends i{constructor(){super(m())}};let p=new class extends n{constructor(){super(m())}};new i(new k),a.s(["defaultStorage",()=>o,"syncSessionStorage",()=>p],32628)},85737,a=>{"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A;(p=b||(b={})).WebUnknown="0",p.React="1",p.NextJs="2",p.Angular="3",p.VueJs="4",p.Nuxt="5",p.Svelte="6",p.ServerSideUnknown="100",p.ReactSSR="101",p.NextJsSSR="102",p.AngularSSR="103",p.VueJsSSR="104",p.NuxtSSR="105",p.SvelteSSR="106",p.ReactNative="201",p.Expo="202",(q=c||(c={})).AI="ai",q.API="api",q.Auth="auth",q.Analytics="analytics",q.DataStore="datastore",q.Geo="geo",q.InAppMessaging="inappmessaging",q.Interactions="interactions",q.Predictions="predictions",q.PubSub="pubsub",q.PushNotification="pushnotification",q.Storage="storage",(r=d||(d={})).CreateConversation="1",r.GetConversation="2",r.ListConversations="3",r.DeleteConversation="4",r.SendMessage="5",r.ListMessages="6",r.OnMessage="7",r.Generation="8",r.UpdateConversation="9",(s=e||(e={})).Record="1",s.IdentifyUser="2",(t=f||(f={})).GraphQl="1",t.Get="2",t.Post="3",t.Put="4",t.Patch="5",t.Del="6",t.Head="7",(u=g||(g={})).SignUp="1",u.ConfirmSignUp="2",u.ResendSignUpCode="3",u.SignIn="4",u.FetchMFAPreference="6",u.UpdateMFAPreference="7",u.SetUpTOTP="10",u.VerifyTOTPSetup="11",u.ConfirmSignIn="12",u.DeleteUserAttributes="15",u.DeleteUser="16",u.UpdateUserAttributes="17",u.FetchUserAttributes="18",u.ConfirmUserAttribute="22",u.SignOut="26",u.UpdatePassword="27",u.ResetPassword="28",u.ConfirmResetPassword="29",u.FederatedSignIn="30",u.RememberDevice="32",u.ForgetDevice="33",u.FetchDevices="34",u.SendUserAttributeVerificationCode="35",u.SignInWithRedirect="36",u.StartWebAuthnRegistration="37",u.CompleteWebAuthnRegistration="38",u.ListWebAuthnCredentials="39",u.DeleteWebAuthnCredential="40",(v=h||(h={})).Subscribe="1",v.GraphQl="2",(w=i||(i={})).SearchByText="0",w.SearchByCoordinates="1",w.SearchForSuggestions="2",w.SearchByPlaceId="3",w.SaveGeofences="4",w.GetGeofence="5",w.ListGeofences="6",w.DeleteGeofences="7",(x=j||(j={})).SyncMessages="1",x.IdentifyUser="2",x.NotifyMessageInteraction="3",(k||(k={})).None="0",(y=l||(l={})).Convert="1",y.Identify="2",y.Interpret="3",(m||(m={})).Subscribe="1",(z=n||(n={})).InitializePushNotifications="1",z.IdentifyUser="2",(A=o||(o={})).UploadData="1",A.DownloadData="2",A.List="3",A.Copy="4",A.Remove="5",A.GetProperties="6",A.GetUrl="7",A.GetDataAccess="8",A.ListCallerAccessGrants="9",a.s(["AiAction",()=>d,"AuthAction",()=>g,"Category",()=>c,"Framework",()=>b,"GeoAction",()=>i,"InAppMessagingAction",()=>j,"StorageAction",()=>o])},72105,45314,a=>{"use strict";let b;a.s(["version",()=>"6.15.8"],72105);var c=a.i(85737);let d=(a,b)=>!!Object.keys(a).find(a=>a.startsWith(b)),e=[{platform:c.Framework.Expo,detectionMethod:function(){return void 0!==a.g.expo}},{platform:c.Framework.ReactNative,detectionMethod:function(){return"undefined"!=typeof navigator&&void 0!==navigator.product&&"ReactNative"===navigator.product}},{platform:c.Framework.NextJs,detectionMethod:function(){return!1}},{platform:c.Framework.Nuxt,detectionMethod:function(){return!1}},{platform:c.Framework.Angular,detectionMethod:function(){return!!("undefined"!=typeof document&&document.querySelector("[ng-version]"))}},{platform:c.Framework.React,detectionMethod:function(){let a=a=>a.startsWith("_react")||a.startsWith("__react");return"undefined"!=typeof document&&Array.from(document.querySelectorAll("[id]")).some(b=>Object.keys(b).find(a))}},{platform:c.Framework.VueJs,detectionMethod:function(){return!1}},{platform:c.Framework.Svelte,detectionMethod:function(){return!1}},{platform:c.Framework.WebUnknown,detectionMethod:function(){return!1}},{platform:c.Framework.NextJsSSR,detectionMethod:function(){return d(a.g,"__next")||d(a.g,"__NEXT")}},{platform:c.Framework.NuxtSSR,detectionMethod:function(){return void 0!==a.g.__NUXT_PATHS__}},{platform:c.Framework.ReactSSR,detectionMethod:function(){return"undefined"!=typeof process&&void 0!==process.env&&!!Object.keys(process.env).find(a=>a.includes("react"))}},{platform:c.Framework.VueJsSSR,detectionMethod:function(){return d(a.g,"__VUE")}},{platform:c.Framework.AngularSSR,detectionMethod:function(){return"undefined"!=typeof process&&"object"==typeof process.env&&process.env.npm_lifecycle_script?.startsWith("ng ")||!1}},{platform:c.Framework.SvelteSSR,detectionMethod:function(){return"undefined"!=typeof process&&void 0!==process.env&&!!Object.keys(process.env).find(a=>a.includes("svelte"))}}],f=[],g=!1,h=()=>{if(!b){if(b=e.find(a=>a.detectionMethod())?.platform||c.Framework.ServerSideUnknown,g)for(;f.length;)f.pop()?.();else f.forEach(a=>{a()});j(c.Framework.ServerSideUnknown,10),j(c.Framework.WebUnknown,10)}return b},i=a=>{g||f.push(a)};function j(a,c){b!==a||g||setTimeout(()=>{b=void 0,g=!0,setTimeout(h,1e3)},c)}a.s(["detectFramework",()=>h,"observeFrameworkChanges",()=>i],45314)},7898,a=>{"use strict";let b={},c=a=>{b[a.category]=a.apis.reduce((b,c)=>({...b,[c]:{refCount:b[c]?.refCount?b[c].refCount+1:1,additionalDetails:a.additionalDetails}}),b[a.category]??{});let c=!1;return()=>{c||(c=!0,a.apis.forEach(c=>{let d=b[a.category][c].refCount;d>1?b[a.category][c].refCount=d-1:(delete b[a.category][c],Object.keys(b[a.category]).length||delete b[a.category])}))}},d=(a,c)=>b[a]?.[c]?.additionalDetails;a.s(["getCustomUserAgent",()=>d,"setCustomUserAgent",()=>c])},54799,(a,b,c)=>{b.exports=a.x("crypto",()=>require("crypto"))},81338,60492,73252,44002,40236,62901,72953,66489,59542,47288,83499,44895,a=>{"use strict";a.i(23048),a.i(21352);var b=a.i(85737),c=a.i(72105),d=a.i(45314),e=a.i(7898);let f="aws-amplify";new class{constructor(){this.userAgent=`${f}/${c.version.replace(/\+.*/,"")}`}get framework(){return(0,d.detectFramework)()}get isReactNative(){return this.framework===b.Framework.ReactNative||this.framework===b.Framework.Expo}observeFrameworkChanges(a){(0,d.observeFrameworkChanges)(a)}};let g=a=>(({category:a,action:b}={})=>{let g=[[f,c.version.replace(/\+.*/,"")]];if(a&&g.push([a,b]),g.push(["framework",(0,d.detectFramework)()]),a&&b){let c=(0,e.getCustomUserAgent)(a,b);c&&c.forEach(a=>{g.push(a)})}return g})(a).map(([a,b])=>a&&b?`${a}/${b}`:a).join(" ");a.s(["getAmplifyUserAgent",()=>g],60492);let h=a=>{let{headers:b,statusCode:c}=a;return{...i(a)?a.$metadata:{},httpStatusCode:c,requestId:b["x-amzn-requestid"]??b["x-amzn-request-id"]??b["x-amz-request-id"],extendedRequestId:b["x-amz-id-2"],cfId:b["x-amz-cf-id"]}},i=a=>"object"==typeof a?.$metadata;a.s(["parseMetadata",()=>h],73252);let j=async a=>{if(!a||a.statusCode<300)return;let b=await k(a),c=(a=>{let[b]=a.toString().split(/[,:]+/);return b.includes("#")?b.split("#")[1]:b})(a.headers["x-amzn-errortype"]??b.code??b.__type??"UnknownError");return Object.assign(Error(b.message??b.Message??"Unknown error"),{name:c,$metadata:h(a)})},k=async a=>{if(!a.body)throw Error("Missing response payload");return Object.assign(await a.body.json(),{$metadata:h(a)})};a.s(["parseJsonBody",()=>k,"parseJsonError",()=>j],44002);let l=(a,b,c,d)=>async(e,f)=>{let g={...d,...e},h=await g.endpointResolver(g,f),i=await b(f,h);return c(await a(i,{...g}))};a.s(["composeServiceApi",()=>l],40236);let m=3,n="amz-sdk-invocation-id",o=a=>{let b=(function(a=3e5){return b=>{let c=2**b*100+100*Math.random();return!(c>a)&&c}})(3e5)(a);return!1===b?3e5:b};a.s(["jitteredBackoff",()=>o],62901);var p=a.i(48770);let q=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch","BadRequestException"],r=a=>async(b,c)=>{let d=c??await a(b)??void 0,e=d?.code||d?.name,f=b?.statusCode;return{retryable:v(c)||u(f,e)||!!e&&q.includes(e)||w(f,e)}},s=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException"],t=["TimeoutError","RequestTimeout","RequestTimeoutException"],u=(a,b)=>429===a||!!b&&s.includes(b),v=a=>[p.AmplifyErrorCode.NetworkError,"ERR_NETWORK"].includes(a?.name),w=(a,b)=>!!a&&[500,502,503,504].includes(a)||!!b&&t.includes(b);a.s(["getRetryDecider",()=>r],72953);let x="cognito-identity",y={service:x,retryDecider:r(j),computeDelay:o,cache:"no-store"};a.s(["COGNITO_IDENTITY_SERVICE_NAME",()=>x,"DEFAULT_SERVICE_CLIENT_API_CONFIG",()=>y],66489);let z=(a,b)=>{let c,d;if(b?.aborted)return Promise.resolve();let e=new Promise(b=>{d=b,c=setTimeout(b,a)});return b?.addEventListener("abort",function a(e){clearTimeout(c),b?.removeEventListener("abort",a),d()}),e},A=(a,b)=>{"[object Object]"===Object.prototype.toString.call(a)&&(a.$metadata={...a.$metadata??{},attempts:b})};var B=a.i(54799);let C={randomUUID:B.randomUUID},D=new Uint8Array(256),E=D.length,F=[];for(let a=0;a<256;++a)F.push((a+256).toString(16).slice(1));let G=function(a,b,c){if(C.randomUUID&&!b&&!a)return C.randomUUID();let d=(a=a||{}).random??a.rng?.()??(E>D.length-16&&((0,B.randomFillSync)(D),E=0),D.slice(E,E+=16));if(d.length<16)throw Error("Random bytes length must be >= 16");if(d[6]=15&d[6]|64,d[8]=63&d[8]|128,b){if((c=c||0)<0||c+16>b.length)throw RangeError(`UUID byte range ${c}:${c+15} is out of buffer bounds`);for(let a=0;a<16;++a)b[c+a]=d[a];return b}return function(a,b=0){return(F[a[b+0]]+F[a[b+1]]+F[a[b+2]]+F[a[b+3]]+"-"+F[a[b+4]]+F[a[b+5]]+"-"+F[a[b+6]]+F[a[b+7]]+"-"+F[a[b+8]]+F[a[b+9]]+"-"+F[a[b+10]]+F[a[b+11]]+F[a[b+12]]+F[a[b+13]]+F[a[b+14]]+F[a[b+15]]).toLowerCase()}(d)},H=(a,b)=>(c,d)=>{let e={},f=b=>a(b,d);for(let a=b.length-1;a>=0;a--)f=(0,b[a])(d)(f,e);return f(c)};a.s(["composeTransferHandler",()=>H],59542);var I=a.i(89270);let J=a=>{let b;return()=>(b||(b=a()),b)},K=H(async({url:a,method:b,headers:c,body:d},{abortSignal:e,cache:f,withCrossDomainCredentials:g})=>{let h;try{h=await fetch(a,{method:b,headers:c,body:["HEAD","GET"].includes(b.toUpperCase())?void 0:d,signal:e,cache:f,credentials:g?"include":"same-origin"})}catch(a){if(a instanceof TypeError)throw new I.AmplifyError({name:p.AmplifyErrorCode.NetworkError,message:"A network error has occurred.",underlyingError:a});throw a}let i={};h.headers?.forEach((a,b)=>{i[b.toLowerCase()]=a});let j={statusCode:h.status,headers:i,body:null},k=Object.assign(h.body??{},{text:J(()=>h.text()),blob:J(()=>h.blob()),json:J(()=>h.json())});return{...j,body:k}},[({userAgentHeader:a="x-amz-user-agent",userAgentValue:b=""})=>c=>async function(d){if(0===b.trim().length)return await c(d);{let e=a.toLowerCase();return d.headers[e]=d.headers[e]?`${d.headers[e]} ${b}`:b,await c(d)}},()=>a=>async function(b){return b.headers[n]||(b.headers[n]=G()),a(b)},({maxAttempts:a=m,retryDecider:b,computeDelay:c,abortSignal:d})=>{if(a<1)throw Error("maxAttempts must be greater than 0");return(e,f)=>async function(g){let h,i,j=f.attemptsCount??0,k=()=>{if(i)return A(i,j),i;throw A(h,j),h};for(;!d?.aborted&&j<a;){try{i=await e(g),h=void 0}catch(a){h=a,i=void 0}j=(f.attemptsCount??0)>j?f.attemptsCount??0:j+1,f.attemptsCount=j;let{isCredentialsExpiredError:l,retryable:m}=await b(i,h,f);if(!m)return k();if(f.isCredentialsExpired=!!l,!d?.aborted&&j<a){let a=c(j);await z(a,d)}}if(!d?.aborted)return k();throw Error("Request aborted.")}},({maxAttempts:a=m})=>(b,c)=>async function(d){let e=c.attemptsCount??0;return d.headers["amz-sdk-request"]=`attempt=${e+1}; max=${a}`,b(d)}]);a.s(["unauthenticatedHandler",()=>K],47288);let L=H(K,[()=>a=>async function(b){return b.headers["cache-control"]="no-store",a(b)}]);a.s(["cognitoIdentityTransferHandler",()=>L],83499);let M=a=>(b,c)=>O(c,N(a),JSON.stringify(b)),N=a=>({"content-type":"application/x-amz-json-1.1","x-amz-target":`AWSCognitoIdentityService.${a}`}),O=({url:a},b,c)=>({headers:b,url:a,body:c,method:"POST"});a.s(["createClientSerializer",()=>M],44895);let P=a=>l(L,M("GetCredentialsForIdentity"),Q,{...y,...a,userAgentValue:g()}),Q=async a=>{if(a.statusCode>=300)throw await j(a);let b=await k(a);return{IdentityId:b.IdentityId,Credentials:R(b.Credentials),$metadata:h(a)}},R=({Expiration:a,...b}={})=>({...b,Expiration:a&&new Date(1e3*a)});a.s(["createGetCredentialsForIdentityClient",()=>P],81338)},30016,68395,a=>{"use strict";var b=a.i(89270);let c=()=>{if("object"==typeof crypto)return crypto;throw new b.AmplifyError({name:"MissingPolyfill",message:"Cannot resolve the `crypto` function from the environment."})},d=()=>{if("function"==typeof btoa)return btoa;throw new b.AmplifyError({name:"Base64EncoderError",message:"Cannot resolve the `btoa` function from the environment."})},e=()=>{if("function"==typeof atob)return atob;throw new b.AmplifyError({name:"Base64EncoderError",message:"Cannot resolve the `atob` function from the environment."})};a.s(["getAtob",()=>e,"getBtoa",()=>d,"getCrypto",()=>c],68395);let f={convert(a,b){let c=a;return b?.urlSafe&&(c=c.replace(/-/g,"+").replace(/_/g,"/")),e()(c)}};a.s(["base64Decoder",()=>f],30016)},83875,a=>{"use strict";var b=a.i(89270);let c=(a,c=b.AmplifyError)=>(b,d,e)=>{let{message:f,recoverySuggestion:g}=a[d];if(!b)throw new c({name:d,message:e?`${f} ${e}`:f,recoverySuggestion:g})};a.s(["createAssertionFunction",()=>c])},8317,83865,a=>{"use strict";var b,c,d=a.i(30016),e=a.i(83875);(b=c||(c={})).AuthTokenConfigException="AuthTokenConfigException",b.AuthUserPoolAndIdentityPoolException="AuthUserPoolAndIdentityPoolException",b.AuthUserPoolException="AuthUserPoolException",b.InvalidIdentityPoolIdException="InvalidIdentityPoolIdException",b.OAuthNotConfigureException="OAuthNotConfigureException";let f={[c.AuthTokenConfigException]:{message:"Auth Token Provider not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app."},[c.AuthUserPoolAndIdentityPoolException]:{message:"Auth UserPool or IdentityPool not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app with UserPoolId and IdentityPoolId."},[c.AuthUserPoolException]:{message:"Auth UserPool not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app with userPoolId and userPoolClientId."},[c.InvalidIdentityPoolIdException]:{message:"Invalid identity pool id provided.",recoverySuggestion:"Make sure a valid identityPoolId is given in the config."},[c.OAuthNotConfigureException]:{message:"oauth param not configured.",recoverySuggestion:"Make sure to call Amplify.configure with oauth parameter in your app."}},g=(0,e.createAssertionFunction)(f);function h(a){g(!!a&&!!a.userPoolId&&!!a.userPoolClientId,c.AuthUserPoolException)}function i(a){g(!!a?.loginWith?.oauth?.domain&&!!a?.loginWith?.oauth?.redirectSignOut&&!!a?.loginWith?.oauth?.redirectSignIn&&!!a?.loginWith?.oauth?.responseType,c.OAuthNotConfigureException)}function j(a){g(!!a?.identityPoolId,c.InvalidIdentityPoolIdException)}function k(a){let b=a.split(".");if(3!==b.length)throw Error("Invalid token");try{let c=b[1].replace(/-/g,"+").replace(/_/g,"/"),e=decodeURIComponent(d.base64Decoder.convert(c).split("").map(a=>`%${`00${a.charCodeAt(0).toString(16)}`.slice(-2)}`).join("")),f=JSON.parse(e);return{toString:()=>a,payload:f}}catch(a){throw Error("Invalid token payload")}}a.s(["assertIdentityPoolIdConfig",()=>j,"assertOAuthConfig",()=>i,"assertTokenProviderConfig",()=>h,"decodeJWT",()=>k],8317);var l=a.i(89270);class m extends l.AmplifyError{constructor(a){super(a),this.constructor=m,Object.setPrototypeOf(this,m.prototype)}}a.s(["AuthError",()=>m],83865)},76026,24379,a=>{"use strict";var b=a.i(48770),c=a.i(83865);function d(a){if(!a||"Error"===a.name||a instanceof TypeError)throw new c.AuthError({name:b.AmplifyErrorCode.Unknown,message:"An unknown error has occurred.",underlyingError:a})}function e(a){let b=a?.split("_")[0];if(!a||0>a.indexOf("_")||!b||"string"!=typeof b)throw new c.AuthError({name:"InvalidUserPoolId",message:"Invalid user pool id provided."});return b}function f(a){if(!a||!a.includes(":"))throw new c.AuthError({name:"InvalidIdentityPoolIdException",message:"Invalid identity pool id provided.",recoverySuggestion:"Make sure a valid identityPoolId is given in the config."});return a.split(":")[0]}a.s(["assertServiceError",()=>d],76026),a.s(["getRegionFromIdentityPoolId",()=>f,"getRegionFromUserPoolId",()=>e],24379)},57572,94931,a=>{"use strict";var b=a.i(83865);let c="UserUnAuthenticatedException",d="DeviceMetadataNotFoundException",e=new b.AuthError({name:"InvalidRedirectException",message:"signInRedirect or signOutRedirect had an invalid format or was not found.",recoverySuggestion:"Please make sure the signIn/Out redirect in your oauth config is valid."});new b.AuthError({name:"InvalidAppSchemeException",message:"A valid non-http app scheme was not found in the config.",recoverySuggestion:"Please make sure a valid custom app scheme is present in the config."});let f=new b.AuthError({name:"InvalidPreferredRedirectUrlException",message:"The given preferredRedirectUrl does not match any items in the redirectSignOutUrls array from the config.",recoverySuggestion:"Please make sure a matching preferredRedirectUrl is provided."}),g=new b.AuthError({name:"InvalidOriginException",message:"redirect is coming from a different origin. The oauth flow needs to be initiated from the same origin",recoverySuggestion:"Please call signInWithRedirect from the same origin."}),h="TokenRefreshException";function i(a){if(!a||!a.accessToken)throw new b.AuthError({name:c,message:"User needs to be authenticated to call this API.",recoverySuggestion:"Sign in before calling this API again."})}function j(a){if(!a||!a.idToken)throw new b.AuthError({name:c,message:"User needs to be authenticated to call this API.",recoverySuggestion:"Sign in before calling this API again."})}a.s(["AUTO_SIGN_IN_EXCEPTION",()=>"AutoSignInException","DEVICE_METADATA_NOT_FOUND_EXCEPTION",()=>d,"OAUTH_SIGNOUT_EXCEPTION",()=>"OAuthSignOutException","TOKEN_REFRESH_EXCEPTION",()=>h,"UNEXPECTED_SIGN_IN_INTERRUPTION_EXCEPTION",()=>"UnexpectedSignInInterruptionException","USER_ALREADY_AUTHENTICATED_EXCEPTION",()=>"UserAlreadyAuthenticatedException","USER_UNAUTHENTICATED_EXCEPTION",()=>c,"invalidOriginException",()=>g,"invalidPreferredRedirectUrlException",()=>f,"invalidRedirectException",()=>e],94931);let k=new b.AuthError({name:h,message:`Token refresh is not supported when authenticated with the 'implicit grant' (token) oauth flow. 
	Please change your oauth configuration to use 'code grant' flow.`,recoverySuggestion:`Please logout and change your Amplify configuration to use "code grant" flow. 
	E.g { responseType: 'code' }`}),l=new b.AuthError({name:c,message:"User needs to be authenticated to call this API.",recoverySuggestion:"Sign in before calling this API again."});function m(a){var b,c;if(p(b=a)&&!b?.refreshToken)throw k;if(!(p(c=a)&&c?.refreshToken))throw l}function n(a){if(!a||!a.deviceKey||!a.deviceGroupKey||!a.randomPassword)throw new b.AuthError({name:d,message:"Either deviceKey, deviceGroupKey or secretPassword were not found during the sign-in process.",recoverySuggestion:"Make sure to not clear storage after calling the signIn API."})}let o={inflightOAuth:"inflightOAuth",oauthSignIn:"oauthSignIn",oauthPKCE:"oauthPKCE",oauthState:"oauthState"};function p(a){return a?.accessToken||a?.idToken}a.s(["OAuthStorageKeys",()=>o,"assertAuthTokens",()=>i,"assertAuthTokensWithRefreshToken",()=>m,"assertDeviceMetadata",()=>n,"assertIdTokenInAuthTokens",()=>j],57572)},34610,65049,41996,92771,91967,1467,62329,94581,57563,46287,42282,79376,a=>{"use strict";let b;var c,d,e=a.i(23285),f=a.i(11883),g=a.i(32628),h=a.i(45255),i=a.i(74012),j=a.i(81338),k=a.i(8317),l=a.i(83865),m=a.i(76026),n=a.i(24379),o=a.i(57572);let p={id:"aws",outputs:{dnsSuffix:"amazonaws.com"},regionRegex:"^(us|eu|ap|sa|ca|me|af)\\-\\w+\\-\\d+$",regions:["aws-global"]},q={partitions:[p,{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn"},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:["aws-cn-global"]}]},r=a=>{let{partitions:b}=q;for(let{regions:c,outputs:d,regionRegex:e}of b){let b=new RegExp(e);if(c.includes(a)||b.test(a))return d.dnsSuffix}return p.outputs.dnsSuffix},s=URL;URLSearchParams,a.s(["AmplifyUrl",()=>s],65049),a.i(23048),a.i(21352);var t=a.i(66489);let u=({endpointOverride:a})=>b=>a?{url:new s(a)}:(({region:a})=>({url:new s(`https://${t.COGNITO_IDENTITY_SERVICE_NAME}.${a}.${r(a)}`)}))(b);var v=a.i(60492),w=a.i(73252),x=a.i(44002),y=a.i(40236),z=a.i(83499),A=a.i(44895);let B=async a=>{if(a.statusCode>=300)throw await (0,x.parseJsonError)(a);return{IdentityId:(await (0,x.parseJsonBody)(a)).IdentityId,$metadata:(0,w.parseMetadata)(a)}};function C(a){let b=(0,k.decodeJWT)(a).payload.iss,c={};if(!b)throw new l.AuthError({name:"InvalidIdTokenException",message:"Invalid Idtoken."});return c[b.replace(/(^\w+:|^)\/\//,"")]=a,c}async function D({tokens:a,authConfig:b,identityIdStore:c}){c.setAuthConfig({Cognito:b});let d=await c.loadIdentityId();if(d)return d.id;let e=a?.idToken?C(a.idToken.toString()):{},f=await E(e,b);return c.storeIdentityId({id:f,type:a?"primary":"guest"}),f}async function E(a,b){let c,d,e=b?.identityPoolId,f=(0,n.getRegionFromIdentityPoolId)(e),g=(d={endpointResolver:u({endpointOverride:b.identityPoolEndpoint})},(0,y.composeServiceApi)(z.cognitoIdentityTransferHandler,(0,A.createClientSerializer)("GetId"),B,{...t.DEFAULT_SERVICE_CLIENT_API_CONFIG,...d,userAgentValue:(0,v.getAmplifyUserAgent)()}));try{c=(await g({region:f},{IdentityPoolId:e,Logins:a})).IdentityId}catch(a){throw(0,m.assertServiceError)(a),new l.AuthError(a)}if(!c)throw new l.AuthError({name:"GetIdResponseException",message:"Received undefined response from getId operation",recoverySuggestion:"Make sure to pass a valid identityPoolId in the configuration."});return c}let F=new i.ConsoleLogger("CognitoCredentialsProvider");class G{constructor(a){this._nextCredentialsRefresh=0,this._identityIdStore=a}async clearCredentialsAndIdentityId(){F.debug("Clearing out credentials and identityId"),this._credentialsAndIdentityId=void 0,await this._identityIdStore.clearIdentityId()}async clearCredentials(){F.debug("Clearing out in-memory credentials"),this._credentialsAndIdentityId=void 0}async getCredentialsAndIdentityId(a){let b=a.authenticated,{tokens:c}=a,{authConfig:d}=a;try{(0,k.assertIdentityPoolIdConfig)(d?.Cognito)}catch{return}if(!b&&!d.Cognito.allowGuestAccess)return;let{forceRefresh:e}=a,f=this.hasTokenChanged(c),g=await D({tokens:c,authConfig:d.Cognito,identityIdStore:this._identityIdStore});return((e||f)&&this.clearCredentials(),b)?((0,o.assertIdTokenInAuthTokens)(c),this.credsForOIDCTokens(d.Cognito,c,g)):this.getGuestCredentials(g,d.Cognito)}async getGuestCredentials(a,b){let c;if(this._credentialsAndIdentityId&&!this.isPastTTL()&&!1===this._credentialsAndIdentityId.isAuthenticatedCreds)return F.info("returning stored credentials as they neither past TTL nor expired."),this._credentialsAndIdentityId;this.clearCredentials();let d=(0,n.getRegionFromIdentityPoolId)(b.identityPoolId),e=(0,j.createGetCredentialsForIdentityClient)({endpointResolver:u({endpointOverride:b.identityPoolEndpoint})});try{c=await e({region:d},{IdentityId:a})}catch(a){throw(0,m.assertServiceError)(a),new l.AuthError(a)}if(c?.Credentials?.AccessKeyId&&c?.Credentials?.SecretKey){this._nextCredentialsRefresh=new Date().getTime()+3e6;let b={credentials:{accessKeyId:c.Credentials.AccessKeyId,secretAccessKey:c.Credentials.SecretKey,sessionToken:c.Credentials.SessionToken,expiration:c.Credentials.Expiration},identityId:a};return c.IdentityId&&(b.identityId=c.IdentityId,this._identityIdStore.storeIdentityId({id:c.IdentityId,type:"guest"})),this._credentialsAndIdentityId={...b,isAuthenticatedCreds:!1},b}throw new l.AuthError({name:"CredentialsNotFoundException",message:"Cognito did not respond with either Credentials, AccessKeyId or SecretKey."})}async credsForOIDCTokens(a,b,c){let d;if(this._credentialsAndIdentityId&&!this.isPastTTL()&&!0===this._credentialsAndIdentityId.isAuthenticatedCreds)return F.debug("returning stored credentials as they neither past TTL nor expired."),this._credentialsAndIdentityId;this.clearCredentials();let e=b.idToken?C(b.idToken.toString()):{},f=(0,n.getRegionFromIdentityPoolId)(a.identityPoolId),g=(0,j.createGetCredentialsForIdentityClient)({endpointResolver:u({endpointOverride:a.identityPoolEndpoint})});try{d=await g({region:f},{IdentityId:c,Logins:e})}catch(a){throw(0,m.assertServiceError)(a),new l.AuthError(a)}if(d?.Credentials?.AccessKeyId&&d?.Credentials?.SecretKey){this._nextCredentialsRefresh=new Date().getTime()+3e6;let a={credentials:{accessKeyId:d.Credentials.AccessKeyId,secretAccessKey:d.Credentials.SecretKey,sessionToken:d.Credentials.SessionToken,expiration:d.Credentials.Expiration},identityId:c};return d.IdentityId&&(a.identityId=d.IdentityId,this._identityIdStore.storeIdentityId({id:d.IdentityId,type:"primary"})),this._credentialsAndIdentityId={...a,isAuthenticatedCreds:!0,associatedIdToken:b.idToken?.toString()},a}throw new l.AuthError({name:"CredentialsException",message:"Cognito did not respond with either Credentials, AccessKeyId or SecretKey."})}isPastTTL(){return void 0===this._nextCredentialsRefresh||this._nextCredentialsRefresh<=Date.now()}hasTokenChanged(a){return!!a&&!!this._credentialsAndIdentityId?.associatedIdToken&&a.idToken?.toString()!==this._credentialsAndIdentityId.associatedIdToken}}let H={accessToken:"accessToken",idToken:"idToken",oidcProvider:"oidcProvider",clockDrift:"clockDrift",refreshToken:"refreshToken",deviceKey:"deviceKey",randomPasswordKey:"randomPasswordKey",deviceGroupKey:"deviceGroupKey",signInDetails:"signInDetails",oauthMetadata:"oauthMetadata"};var I=a.i(83875);(d||(d={})).InvalidAuthTokens="InvalidAuthTokens";let J={[d.InvalidAuthTokens]:{message:"Invalid tokens.",recoverySuggestion:"Make sure the tokens are valid."}},K=(0,I.createAssertionFunction)(J),L="CognitoIdentityServiceProvider";class M{getKeyValueStorage(){if(!this.keyValueStorage)throw new l.AuthError({name:"KeyValueStorageNotFoundException",message:"KeyValueStorage was not found in TokenStore"});return this.keyValueStorage}setKeyValueStorage(a){this.keyValueStorage=a}setAuthConfig(a){this.authConfig=a}async loadTokens(){try{let a=await this.getAuthKeys(),b=await this.getKeyValueStorage().getItem(a.accessToken);if(!b)throw new l.AuthError({name:"NoSessionFoundException",message:"Auth session was not found. Make sure to call signIn."});let c=(0,k.decodeJWT)(b),d=await this.getKeyValueStorage().getItem(a.idToken),e=d?(0,k.decodeJWT)(d):void 0,f=await this.getKeyValueStorage().getItem(a.refreshToken)??void 0,g=await this.getKeyValueStorage().getItem(a.clockDrift)??"0",h=Number.parseInt(g),i=await this.getKeyValueStorage().getItem(a.signInDetails),j={accessToken:c,idToken:e,refreshToken:f,deviceMetadata:await this.getDeviceMetadata()??void 0,clockDrift:h,username:await this.getLastAuthUser()};return i&&(j.signInDetails=JSON.parse(i)),j}catch(a){return null}}async storeTokens(a){K(void 0!==a,d.InvalidAuthTokens);let b=a.username;await this.getKeyValueStorage().setItem(this.getLastAuthUserKey(),b);let c=await this.getAuthKeys();await this.getKeyValueStorage().setItem(c.accessToken,a.accessToken.toString()),a.idToken?await this.getKeyValueStorage().setItem(c.idToken,a.idToken.toString()):await this.getKeyValueStorage().removeItem(c.idToken),a.refreshToken?await this.getKeyValueStorage().setItem(c.refreshToken,a.refreshToken):await this.getKeyValueStorage().removeItem(c.refreshToken),a.deviceMetadata&&(a.deviceMetadata.deviceKey&&await this.getKeyValueStorage().setItem(c.deviceKey,a.deviceMetadata.deviceKey),a.deviceMetadata.deviceGroupKey&&await this.getKeyValueStorage().setItem(c.deviceGroupKey,a.deviceMetadata.deviceGroupKey),await this.getKeyValueStorage().setItem(c.randomPasswordKey,a.deviceMetadata.randomPassword)),a.signInDetails?await this.getKeyValueStorage().setItem(c.signInDetails,JSON.stringify(a.signInDetails)):await this.getKeyValueStorage().removeItem(c.signInDetails),await this.getKeyValueStorage().setItem(c.clockDrift,`${a.clockDrift}`)}async clearTokens(){let a=await this.getAuthKeys();await Promise.all([this.getKeyValueStorage().removeItem(a.accessToken),this.getKeyValueStorage().removeItem(a.idToken),this.getKeyValueStorage().removeItem(a.clockDrift),this.getKeyValueStorage().removeItem(a.refreshToken),this.getKeyValueStorage().removeItem(a.signInDetails),this.getKeyValueStorage().removeItem(this.getLastAuthUserKey()),this.getKeyValueStorage().removeItem(a.oauthMetadata)])}async getDeviceMetadata(a){let b=await this.getAuthKeys(a),c=await this.getKeyValueStorage().getItem(b.deviceKey),d=await this.getKeyValueStorage().getItem(b.deviceGroupKey),e=await this.getKeyValueStorage().getItem(b.randomPasswordKey);return e&&d&&c?{deviceKey:c,deviceGroupKey:d,randomPassword:e}:null}async clearDeviceMetadata(a){let b=await this.getAuthKeys(a);await Promise.all([this.getKeyValueStorage().removeItem(b.deviceKey),this.getKeyValueStorage().removeItem(b.deviceGroupKey),this.getKeyValueStorage().removeItem(b.randomPasswordKey)])}async getAuthKeys(a){(0,k.assertTokenProviderConfig)(this.authConfig?.Cognito);let b=a??await this.getLastAuthUser();return N(L,`${this.authConfig.Cognito.userPoolClientId}.${b}`)}getLastAuthUserKey(){(0,k.assertTokenProviderConfig)(this.authConfig?.Cognito);let a=this.authConfig.Cognito.userPoolClientId;return`${L}.${a}.LastAuthUser`}async getLastAuthUser(){return await this.getKeyValueStorage().getItem(this.getLastAuthUserKey())??"username"}async setOAuthMetadata(a){let{oauthMetadata:b}=await this.getAuthKeys();await this.getKeyValueStorage().setItem(b,JSON.stringify(a))}async getOAuthMetadata(){let{oauthMetadata:a}=await this.getAuthKeys(),b=await this.getKeyValueStorage().getItem(a);return b&&JSON.parse(b)}}let N=(a,b)=>O(H)(`${a}`,b);function O(a){let b=Object.values({...a});return(a,c)=>b.reduce((b,d)=>({...b,[d]:`${a}.${c}.${d}`}),{})}let P={identityId:"identityId"},Q=new i.ConsoleLogger("DefaultIdentityIdStore");class R{setAuthConfig(a){(0,k.assertIdentityPoolIdConfig)(a.Cognito),this.authConfig=a,this._authKeys=S("Cognito",a.Cognito.identityPoolId)}constructor(a){this._authKeys={},this._hasGuestIdentityId=!1,this.keyValueStorage=a}async loadIdentityId(){(0,k.assertIdentityPoolIdConfig)(this.authConfig?.Cognito);try{if(this._primaryIdentityId)return{id:this._primaryIdentityId,type:"primary"};{let a=await this.keyValueStorage.getItem(this._authKeys.identityId);if(a)return this._hasGuestIdentityId=!0,{id:a,type:"guest"};return null}}catch(a){return Q.log("Error getting stored IdentityId.",a),null}}async storeIdentityId(a){(0,k.assertIdentityPoolIdConfig)(this.authConfig?.Cognito),"guest"===a.type?(this.keyValueStorage.setItem(this._authKeys.identityId,a.id),this._primaryIdentityId=void 0,this._hasGuestIdentityId=!0):(this._primaryIdentityId=a.id,this._hasGuestIdentityId&&(this.keyValueStorage.removeItem(this._authKeys.identityId),this._hasGuestIdentityId=!1))}async clearIdentityId(){this._primaryIdentityId=void 0,await this.keyValueStorage.removeItem(this._authKeys.identityId)}}let S=(a,b)=>O(P)(`com.amplify.${a}`,b),T=new G(new R(g.defaultStorage)),U="cognito-idp",V=({endpointOverride:a})=>b=>a?{url:new s(a)}:(({region:a})=>({url:new s(`https://${U}.${a}.${r(a)}`)}))(b);a.s(["createCognitoUserPoolEndpointResolver",()=>V],41996);let W=a=>(b,c)=>Y(c,X(a),JSON.stringify(b)),X=a=>({"content-type":"application/x-amz-json-1.1","x-amz-target":`AWSCognitoIdentityProviderService.${a}`}),Y=({url:a},b,c)=>({headers:b,url:a,body:c,method:"POST"});a.s(["createUserPoolSerializer",()=>W],92771);let Z=()=>async a=>{if(a.statusCode>=300){let b=await (0,x.parseJsonError)(a);throw(0,m.assertServiceError)(b),new l.AuthError({name:b.name,message:b.message,metadata:b.$metadata})}return(0,x.parseJsonBody)(a)};a.s(["createUserPoolDeserializer",()=>Z],91967);var $=a.i(59542),_=a.i(47288);let aa=(0,$.composeTransferHandler)(_.unauthenticatedHandler,[()=>(a,b)=>async function(b){return b.headers["cache-control"]="no-store",a(b)}]);a.s(["cognitoUserPoolTransferHandler",()=>aa],1467);var ab=a.i(72953),ac=a.i(62901);let ad={service:U,retryDecider:(0,ab.getRetryDecider)(x.parseJsonError),computeDelay:ac.jitteredBackoff,get userAgentValue(){return(0,v.getAmplifyUserAgent)()},cache:"no-store"};a.s(["DEFAULT_SERVICE_CLIENT_API_CONFIG",()=>ad],62329);let ae=(c=async({tokens:a,authConfig:b,username:c,clientMetadata:d})=>{let e;(0,k.assertTokenProviderConfig)(b?.Cognito);let{userPoolId:f,userPoolClientId:g,userPoolEndpoint:h}=b.Cognito,i=(0,n.getRegionFromUserPoolId)(f);(0,o.assertAuthTokensWithRefreshToken)(a);let j=(e={endpointResolver:V({endpointOverride:h})},(0,y.composeServiceApi)(aa,W("GetTokensFromRefreshToken"),Z(),{...ad,...e})),{AuthenticationResult:m}=await j({region:i},{ClientId:g,RefreshToken:a.refreshToken,DeviceKey:a.deviceMetadata?.deviceKey,ClientMetadata:d}),p=(0,k.decodeJWT)(m?.AccessToken??""),q=m?.IdToken?(0,k.decodeJWT)(m.IdToken):void 0,{iat:r}=p.payload;if(!r)throw new l.AuthError({name:"iatNotFoundException",message:"iat not found in access token"});return{accessToken:p,idToken:q,clockDrift:1e3*r-new Date().getTime(),refreshToken:m?.RefreshToken??a.refreshToken,username:c}},async(...a)=>b||(b=new Promise((d,e)=>{c(...a).then(a=>{d(a)}).catch(a=>{e(a)}).finally(()=>{b=void 0})})));var af=a.i(5057);let ag=()=>!1;function ah({expiresAt:a,clockDrift:b,tolerance:c=5e3}){return Date.now()+b+c>a}a.s(["isBrowser",()=>ag],94581);let ai="amplify-signin-with-hostedUI",aj="CognitoIdentityServiceProvider";class ak{constructor(a){this.keyValueStorage=a}async clearOAuthInflightData(){(0,k.assertTokenProviderConfig)(this.cognitoConfig);let a=al(aj,this.cognitoConfig.userPoolClientId);await Promise.all([this.keyValueStorage.removeItem(a.inflightOAuth),this.keyValueStorage.removeItem(a.oauthPKCE),this.keyValueStorage.removeItem(a.oauthState)])}async clearOAuthData(){(0,k.assertTokenProviderConfig)(this.cognitoConfig);let a=al(aj,this.cognitoConfig.userPoolClientId);return await this.clearOAuthInflightData(),await this.keyValueStorage.removeItem(ai),this.keyValueStorage.removeItem(a.oauthSignIn)}loadOAuthState(){(0,k.assertTokenProviderConfig)(this.cognitoConfig);let a=al(aj,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.getItem(a.oauthState)}storeOAuthState(a){(0,k.assertTokenProviderConfig)(this.cognitoConfig);let b=al(aj,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.setItem(b.oauthState,a)}loadPKCE(){(0,k.assertTokenProviderConfig)(this.cognitoConfig);let a=al(aj,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.getItem(a.oauthPKCE)}storePKCE(a){(0,k.assertTokenProviderConfig)(this.cognitoConfig);let b=al(aj,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.setItem(b.oauthPKCE,a)}setAuthConfig(a){this.cognitoConfig=a}async loadOAuthInFlight(){(0,k.assertTokenProviderConfig)(this.cognitoConfig);let a=al(aj,this.cognitoConfig.userPoolClientId);return await this.keyValueStorage.getItem(a.inflightOAuth)==="true"}async storeOAuthInFlight(a){(0,k.assertTokenProviderConfig)(this.cognitoConfig);let b=al(aj,this.cognitoConfig.userPoolClientId);await this.keyValueStorage.setItem(b.inflightOAuth,`${a}`)}async loadOAuthSignIn(){(0,k.assertTokenProviderConfig)(this.cognitoConfig);let a=al(aj,this.cognitoConfig.userPoolClientId),b=await this.keyValueStorage.getItem(ai),[c,d]=(await this.keyValueStorage.getItem(a.oauthSignIn))?.split(",")??[];return{isOAuthSignIn:"true"===c||"true"===b,preferPrivateSession:"true"===d}}async storeOAuthSignIn(a,b=!1){(0,k.assertTokenProviderConfig)(this.cognitoConfig);let c=al(aj,this.cognitoConfig.userPoolClientId);await this.keyValueStorage.setItem(c.oauthSignIn,`${a},${b}`)}}let al=(a,b)=>O(o.OAuthStorageKeys)(a,b);a.s(["DefaultOAuthStore",()=>ak],57563);let am=new ak(g.defaultStorage);a.s(["oAuthStore",()=>am],46287);let an=[],ao=a=>{an.push(a)},ap=()=>{for(;an.length;)an.pop()?.()};a.s(["addInflightPromise",()=>ao,"resolveAndClearInflightPromises",()=>ap],42282);class aq{constructor(){this.waitForInflightOAuth=ag()?async()=>{if(await am.loadOAuthInFlight())return this.inflightPromise||(this.inflightPromise=new Promise((a,b)=>{ao(a)})),this.inflightPromise}:async()=>{}}setAuthConfig(a){am.setAuthConfig(a.Cognito),this.authConfig=a}setTokenRefresher(a){this.tokenRefresher=a}setAuthTokenStore(a){this.tokenStore=a}getTokenStore(){if(!this.tokenStore)throw new l.AuthError({name:"EmptyTokenStoreException",message:"TokenStore not set"});return this.tokenStore}getTokenRefresher(){if(!this.tokenRefresher)throw new l.AuthError({name:"EmptyTokenRefresherException",message:"TokenRefresher not set"});return this.tokenRefresher}setClientMetadataProvider(a){this.clientMetadataProvider=a}async getTokens(a){let b;try{(0,k.assertTokenProviderConfig)(this.authConfig?.Cognito)}catch(a){return null}await this.waitForInflightOAuth(),this.inflightPromise=void 0,b=await this.getTokenStore().loadTokens();let c=await this.getTokenStore().getLastAuthUser();if(null===b)return null;let d=!!b?.idToken&&ah({expiresAt:(b.idToken?.payload?.exp??0)*1e3,clockDrift:b.clockDrift??0}),e=ah({expiresAt:(b.accessToken?.payload?.exp??0)*1e3,clockDrift:b.clockDrift??0});return(a?.forceRefresh||d||e)&&null===(b=await this.refreshTokens({tokens:b,username:c,clientMetadata:a?.clientMetadata??await this.clientMetadataProvider?.()}))?null:{accessToken:b?.accessToken,idToken:b?.idToken,signInDetails:b?.signInDetails}}async refreshTokens({tokens:a,username:b,clientMetadata:c}){try{let{signInDetails:d}=a,e=await this.getTokenRefresher()({tokens:a,authConfig:this.authConfig,username:b,clientMetadata:c});return e.signInDetails=d,await this.setTokens({tokens:e}),af.Hub.dispatch("auth",{event:"tokenRefresh"},"Auth",af.AMPLIFY_SYMBOL),e}catch(a){return this.handleErrors(a)}}handleErrors(a){if((0,m.assertServiceError)(a),this.isAuthenticationError(a)&&this.clearTokens(),af.Hub.dispatch("auth",{event:"tokenRefresh_failure",data:{error:a}},"Auth",af.AMPLIFY_SYMBOL),a.name.startsWith("NotAuthorizedException"))return null;throw a}isAuthenticationError(a){return["NotAuthorizedException","TokenRevokedException","UserNotFoundException","PasswordResetRequiredException","UserNotConfirmedException","RefreshTokenReuseException"].some(b=>a?.name?.startsWith?.(b))}async setTokens({tokens:a}){return this.getTokenStore().storeTokens(a)}async clearTokens(){return this.getTokenStore().clearTokens()}getDeviceMetadata(a){return this.getTokenStore().getDeviceMetadata(a)}clearDeviceMetadata(a){return this.getTokenStore().clearDeviceMetadata(a)}setOAuthMetadata(a){return this.getTokenStore().setOAuthMetadata(a)}getOAuthMetadata(){return this.getTokenStore().getOAuthMetadata()}}let ar=new class{constructor(){this.authTokenStore=new M,this.authTokenStore.setKeyValueStorage(g.defaultStorage),this.tokenOrchestrator=new aq,this.tokenOrchestrator.setAuthTokenStore(this.authTokenStore),this.tokenOrchestrator.setTokenRefresher(ae)}getTokens(a={}){return this.tokenOrchestrator.getTokens(a)}setKeyValueStorage(a){this.authTokenStore.setKeyValueStorage(a)}setClientMetadataProvider(a){this.tokenOrchestrator.setClientMetadataProvider(a)}setAuthConfig(a){this.authTokenStore.setAuthConfig(a),this.tokenOrchestrator.setAuthConfig(a)}},{tokenOrchestrator:as}=ar;a.s(["cognitoUserPoolsTokenProvider",()=>ar,"tokenOrchestrator",()=>as],79376);let at={configure(a,b){let c=(0,h.parseAmplifyConfig)(a),d=new f.CookieStorage({sameSite:"lax"}),i=b?.ssr?d:g.defaultStorage,j=b?.ssr?new G(new R(d)):T;if(!c.Auth||b?.Auth)return void e.Amplify.configure(c,b);if(!e.Amplify.libraryOptions.Auth){ar.setAuthConfig(c.Auth),ar.setKeyValueStorage(i),e.Amplify.configure(c,{...b,Auth:{tokenProvider:ar,credentialsProvider:j}});return}if(b){let a=e.Amplify.libraryOptions.Auth;void 0!==b.ssr&&(ar.setKeyValueStorage(i),a.credentialsProvider=j),e.Amplify.configure(c,{Auth:a,...b});return}e.Amplify.configure(c)},getConfig:()=>e.Amplify.getConfig()};a.s(["Amplify",()=>at],34610)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__d553742f._.js.map